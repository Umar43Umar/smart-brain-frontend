{"ast":null,"code":"import React,{Component}from\"react\";import\"./App.css\";import Navigation from\"./components/Navigation/Navigation\";import FaceRecognition from\"./components/FaceRecognition/FaceRecognition\";import Signin from\"./components/Signin/Signin\";import Register from\"./components/Register/Register\";import Logo from\"./components/Logo/Logo\";import Rank from\"./components/Rank/Rank\";import ParticlesBg from\"particles-bg\";import ImageLinkForm from\"./components/ImageLinkForm/ImageLinkForm\";// import Clarifai from 'clarifai';\n// const app = new Clarifai.App({\n//   apiKey: '851885a104204a2191f730b890d7e6bf'\n// });\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const returnClarifaiRequestOptions=imageUrl=>{const PAT=\"851885a104204a2191f730b890d7e6bf\";const USER_ID=\"nzxs15syr1vg\";const APP_ID=\"Myfirstapplication\";// const MODEL_ID = 'face-detection';\nconst IMAGE_URL=imageUrl;const raw=JSON.stringify({user_app_id:{user_id:USER_ID,app_id:APP_ID},inputs:[{data:{image:{url:IMAGE_URL}}}]});const requestOptions={method:\"POST\",headers:{Accept:\"application/json\",Authorization:\"Key \"+PAT},body:raw};return requestOptions;};// NOTE: MODEL_VERSION_ID is optional, you can also call prediction with the MODEL_ID only\n// https://api.clarifai.com/v2/models/{YOUR_MODEL_ID}/outputs\n// this will default to the latest version_id\nconst initialState={input:\"\",imageUrl:\"\",box:{},route:\"signin\",isSignedIn:false,user:{id:\"\",name:\"\",email:\"\",entries:0,joined:\"\"}};class App extends Component{constructor(){super();this.loadUser=data=>{this.setState({user:{id:data.id,name:data.name,email:data.email,entries:data.entries,joined:data.joined}});};this.calculateFaceLocation=data=>{const clarifaiFace=data.outputs[0].data.regions[0].region_info.bounding_box;const image=document.getElementById(\"inputimage\");const width=Number(image.width);const height=Number(image.height);return{leftCol:clarifaiFace.left_col*width,topRow:clarifaiFace.top_row*height,rightCol:width-clarifaiFace.right_col*width,bottomRow:height-clarifaiFace.bottom_row*height};};this.displayFaceBox=box=>{this.setState({box:box});};this.onInputChange=event=>{this.setState({input:event.target.value});};this.onButtonSubmit=()=>{this.setState({imageUrl:this.state.input});// app.models.predict('face-detection', this.state.input)\nfetch(\"https://api.clarifai.com/v2/models/face-detection/outputs\",returnClarifaiRequestOptions(this.state.input)).then(response=>response.json()).then(response=>this.displayFaceBox(this.calculateFaceLocation(response))).catch(err=>console.log(err));fetch(\"http://localhost:4000/image\",{method:\"put\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({id:this.state.user.id})}).then(response=>response.json()).then(entryCount=>{// Update the user's entry count in the state\nthis.setState(Object.assign(this.state.user,{entries:entryCount}));}).catch(err=>console.log(err));};this.onRouteChange=route=>{if(route===\"signout\"){this.setState(initialState);}else if(route===\"home\"){this.setState({isSignedIn:true});}this.setState({route:route});};this.state=initialState;}render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(ParticlesBg,{type:\"circle\",bg:{position:\"fixed\",zIndex:-1,top:0,left:0,right:0,bottom:0}}),/*#__PURE__*/_jsx(Navigation,{isSignedIn:this.state.isSignedIn,onRouteChange:this.onRouteChange}),this.state.route===\"home\"?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Logo,{}),/*#__PURE__*/_jsx(Rank,{name:this.state.user.name,entries:this.state.user.entries}),/*#__PURE__*/_jsx(ImageLinkForm,{onInputChange:this.onInputChange,onButtonSubmit:this.onButtonSubmit}),/*#__PURE__*/_jsx(FaceRecognition,{box:this.state.box,imageUrl:this.state.imageUrl})]}):this.state.route===\"signin\"?/*#__PURE__*/_jsx(Signin,{loadUser:this.loadUser,onRouteChange:this.onRouteChange}):/*#__PURE__*/_jsx(Register,{loadUser:this.loadUser,onRouteChange:this.onRouteChange})]});}}export default App;","map":{"version":3,"names":["React","Component","Navigation","FaceRecognition","Signin","Register","Logo","Rank","ParticlesBg","ImageLinkForm","jsx","_jsx","jsxs","_jsxs","returnClarifaiRequestOptions","imageUrl","PAT","USER_ID","APP_ID","IMAGE_URL","raw","JSON","stringify","user_app_id","user_id","app_id","inputs","data","image","url","requestOptions","method","headers","Accept","Authorization","body","initialState","input","box","route","isSignedIn","user","id","name","email","entries","joined","App","constructor","loadUser","setState","calculateFaceLocation","clarifaiFace","outputs","regions","region_info","bounding_box","document","getElementById","width","Number","height","leftCol","left_col","topRow","top_row","rightCol","right_col","bottomRow","bottom_row","displayFaceBox","onInputChange","event","target","value","onButtonSubmit","state","fetch","then","response","json","catch","err","console","log","entryCount","Object","assign","onRouteChange","render","className","children","type","bg","position","zIndex","top","left","right","bottom"],"sources":["D:/My projects/smartbrain/src/App.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport \"./App.css\";\nimport Navigation from \"./components/Navigation/Navigation\";\nimport FaceRecognition from \"./components/FaceRecognition/FaceRecognition\";\nimport Signin from \"./components/Signin/Signin\";\nimport Register from \"./components/Register/Register\";\nimport Logo from \"./components/Logo/Logo\";\nimport Rank from \"./components/Rank/Rank\";\nimport ParticlesBg from \"particles-bg\";\nimport ImageLinkForm from \"./components/ImageLinkForm/ImageLinkForm\";\n// import Clarifai from 'clarifai';\n\n// const app = new Clarifai.App({\n//   apiKey: '851885a104204a2191f730b890d7e6bf'\n// });\nconst returnClarifaiRequestOptions = (imageUrl) => {\n  const PAT = \"851885a104204a2191f730b890d7e6bf\";\n  const USER_ID = \"nzxs15syr1vg\";\n  const APP_ID = \"Myfirstapplication\";\n  // const MODEL_ID = 'face-detection';\n  const IMAGE_URL = imageUrl;\n  const raw = JSON.stringify({\n    user_app_id: {\n      user_id: USER_ID,\n      app_id: APP_ID,\n    },\n    inputs: [\n      {\n        data: {\n          image: {\n            url: IMAGE_URL,\n          },\n        },\n      },\n    ],\n  });\n  const requestOptions = {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      Authorization: \"Key \" + PAT,\n    },\n    body: raw,\n  };\n  return requestOptions;\n};\n\n// NOTE: MODEL_VERSION_ID is optional, you can also call prediction with the MODEL_ID only\n// https://api.clarifai.com/v2/models/{YOUR_MODEL_ID}/outputs\n// this will default to the latest version_id\nconst initialState = {\n  input: \"\",\n  imageUrl: \"\",\n  box: {},\n  route: \"signin\",\n  isSignedIn: false,\n  user: {\n    id: \"\",\n    name: \"\",\n    email: \"\",\n    entries: 0,\n    joined: \"\",\n  },\n};\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = initialState;\n  }\n\n  loadUser = (data) => {\n    this.setState({\n      user: {\n        id: data.id,\n        name: data.name,\n        email: data.email,\n        entries: data.entries,\n        joined: data.joined,\n      },\n    });\n  };\n  calculateFaceLocation = (data) => {\n    const clarifaiFace =\n      data.outputs[0].data.regions[0].region_info.bounding_box;\n    const image = document.getElementById(\"inputimage\");\n    const width = Number(image.width);\n    const height = Number(image.height);\n    return {\n      leftCol: clarifaiFace.left_col * width,\n      topRow: clarifaiFace.top_row * height,\n      rightCol: width - clarifaiFace.right_col * width,\n      bottomRow: height - clarifaiFace.bottom_row * height,\n    };\n  };\n\n  displayFaceBox = (box) => {\n    this.setState({ box: box });\n  };\n\n  onInputChange = (event) => {\n    this.setState({ input: event.target.value });\n  };\n  onButtonSubmit = () => {\n    this.setState({ imageUrl: this.state.input });\n    // app.models.predict('face-detection', this.state.input)\n    fetch(\n      `https://api.clarifai.com/v2/models/face-detection/outputs`,\n      returnClarifaiRequestOptions(this.state.input)\n    )\n      .then((response) => response.json())\n      .then((response) =>\n        this.displayFaceBox(this.calculateFaceLocation(response))\n      )\n      .catch((err) => console.log(err));\n    fetch(\"http://localhost:4000/image\", {\n      method: \"put\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        id: this.state.user.id,\n      }),\n    })\n      .then((response) => response.json())\n      .then((entryCount) => {\n        // Update the user's entry count in the state\n        this.setState(Object.assign(this.state.user, { entries: entryCount }));\n      })\n      .catch((err) => console.log(err));\n  };\n  onRouteChange = (route) => {\n    if (route === \"signout\") {\n      this.setState(initialState);\n    } else if (route === \"home\") {\n      this.setState({ isSignedIn: true });\n    }\n    this.setState({ route: route });\n  };\n\n  render() {\n    return (\n      <div className=\"App\">\n        <ParticlesBg\n          type=\"circle\"\n          bg={{\n            position: \"fixed\",\n            zIndex: -1,\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n          }}\n        />\n        <Navigation\n          isSignedIn={this.state.isSignedIn}\n          onRouteChange={this.onRouteChange}\n        />\n        {this.state.route === \"home\" ? (\n          <div>\n            <Logo />\n            <Rank\n              name={this.state.user.name}\n              entries={this.state.user.entries}\n            />\n            <ImageLinkForm\n              onInputChange={this.onInputChange}\n              onButtonSubmit={this.onButtonSubmit}\n            />\n            <FaceRecognition\n              box={this.state.box}\n              imageUrl={this.state.imageUrl}\n            />\n          </div>\n        ) : this.state.route === \"signin\" ? (\n          <Signin loadUser={this.loadUser} onRouteChange={this.onRouteChange} />\n        ) : (\n          <Register\n            loadUser={this.loadUser}\n            onRouteChange={this.onRouteChange}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}